<%= form_tag({:action=>"associate_modules_projects", :controller=>"module_projects", :project_id => @project.id}, :method => "POST") do %>
  <h1>Associate modules</h1>
  <table class="table table-striped">
    <tr>
      <th>Module projects</th>
      <% @module_projects.each do |mp| %>
        <th>
          <%= mp.pemodule.title %>
        </th>
      <% end %>
    </tr>

    <% @module_projects.each_with_index do |i, l| %>
      <tr>
        <td>
          <strong><%= i.pemodule.title %></strong>
        </td>
        <% @module_projects.each_with_index do |j, k| %>
          <td>
            <% if  k < l %>
              <%= check_box_tag("module_projects[#{i.id}][]", j.id, (i.associated_module_projects.map(&:id).include?(j.id)) )%>
            <% else %>
              -
            <% end %>
          </td>
        <% end %>
      </tr>
    <% end %>
  </table>

  <%= submit_tag I18n.t("save"), :class => "btn " %>
  <%= submit_tag I18n.t("apply"), :class => "btn" %>
<% end %>
