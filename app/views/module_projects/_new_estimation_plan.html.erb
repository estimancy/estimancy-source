
<% module_projects = @project.module_projects.includes(:pemodule, :inverse_associated_module_projects).reject{ |mp| mp.id == @initialization_module_project.id }.reverse %>
<% @alphabet = %w(A B C D E F G H I J K L M N O P Q R S T U V W X Y Z) %>

<% unless module_projects.empty? %>
  <div class="module_box" style="width: auto; overflow-x:auto;">
    <% module_projects.each_with_index do |pmod, index| %>
      <div class="card card-module card-module--function-point module_project <%= "#{pmod.pemodule.alias}_#{pmod.position_x}_#{pmod.position_y}" %>"
           id="<%= "mp_#{pmod.pemodule.alias}_#{pmod.id}" %>"
           data-module_project_id="<%= pmod.id %>"
           style="margin-bottom: 50px; margin-left: 60px; top: <%= index * 180 %>px;">
        <div class="card-body">
          <div class="card-module-text">
            <% if pmod.id != @initialization_module_project.id %>
              <%= link_to pmod, edit_module_project_path(pmod, organization_id: @organization.id) %>
            <% else %>
              <%= link_to pmod, "#" %>
            <% end %>
          </div>
          <div class="card-module-precision"></div>
          <div class="card-module-buttons">
            <%= link_to(raw("<i class='material-icons'>delete</i>"), pmod, confirm: I18n.t('are_you_sure'), method: :delete) %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
<% end %>

<%= render :partial => 'module_projects/new_dynamic_estimation_paths', :locals => {:module_projects => module_projects, estimation_view: "estimation_plan" } %>