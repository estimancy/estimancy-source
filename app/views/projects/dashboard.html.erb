
  <div class="mb-5">
    <div class="effort-bloc">
      <ul class="nav nav-pills tabs">
        <li class="nav-item">
          <a class="nav-link active" href="#">Effort par phase</a>
        </li>
        <li class="nav-item">
          <a class="nav-link " href="#">Effort par coût</a>
        </li>
      </ul>
      <div class="card card-widget">
        <div class="card-body">
          <div class="effort-bloc-tools d-flex justify-content-end mb-2">
            <a href="#"><i class="material-icons">get_app</i></a>
            <a href="#"><i class="material-icons">edit</i></a>
            <a href="#"><i class="material-icons">delete</i></a>
          </div>
          <div class="effort-table">
            <table class="table" class="display" style="width:100%">
              <thead>
              <tr>
                <th>Phase</th>
                <th>Analyste</th>
                <th>Architecte</th>
                <th>Testeur</th>
                <th>MOA</th>
                <th>A.Q</th>
                <th>CP</th>
                <th>G.Conf</th>
                <th>Total Effort retenu (j.h)</th>
              </tr>
              </thead>
              <tbody>
              <tr>
                <td>Cycle de vie en V FR/OS</td>
                <td>8</td>
                <td>54</td>
                <td>22</td>
                <td>129</td>
                <td>102</td>
                <td>84</td>
                <td>48</td>
                <td>447</td>
              </tr>
              <tr>
                <td>Spécifications générales</td>
                <td>8</td>
                <td>54</td>
                <td>22</td>
                <td>129</td>
                <td>102</td>
                <td>84</td>
                <td>48</td>
                <td>447</td>
              </tr>
              <tr>
                <td>Spécifications détaillées</td>
                <td>8</td>
                <td>54</td>
                <td>22</td>
                <td>129</td>
                <td>102</td>
                <td>84</td>
                <td>48</td>
                <td>447</td>
              </tr>
              <tr>
                <td>Réalisation / Tests unitaires</td>
                <td>8</td>
                <td>54</td>
                <td>22</td>
                <td>129</td>
                <td>102</td>
                <td>84</td>
                <td>48</td>
                <td>447</td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="mb-5">
    <div class="effort-chart-bloc card card-widget">
      <div class="card-body">
        <h3>Répartition effort par activités</h3>
        <div class="effort-chart mt-4">
          <div class="effort-chart-canvas"><canvas id="pieCanvas"></canvas></div>
          <div class="effort-chart-legend" id="pieLegend"></div>
        </div>
      </div>
    </div>

    <script>
        var myCanvas = document.getElementById("pieCanvas");
        var myLegend = document.getElementById("pieLegend");
        myCanvas.width = 280;
        myCanvas.height = 280;
        var ctx = myCanvas.getContext("2d");

        function drawPieSlice(ctx, centerX, centerY, radius, startAngle, endAngle, color) {
            ctx.fillStyle = color;
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.arc(centerX, centerY, radius, startAngle, endAngle);
            ctx.closePath();
            ctx.fill();
        }
        // Pie chart
        var Piechart = function(options) {
            this.options = options;
            this.canvas = options.canvas;
            this.ctx = this.canvas.getContext("2d");
            this.colors = options.colors;
            this.draw = function() {
                var total_value = 0;
                var color_index = 0;
                for (var categ in this.options.data) {
                    var val = this.options.data[categ];
                    total_value += val;
                }
                var start_angle = 0;
                for (categ in this.options.data) {
                    var val = this.options.data[categ];
                    var slice_angle = 2 * Math.PI * val / total_value;
                    drawPieSlice(
                        this.ctx,
                        this.canvas.width / 2,
                        this.canvas.height / 2,
                        Math.min(this.canvas.width / 2, this.canvas.height / 2),
                        start_angle,
                        start_angle + slice_angle,
                        this.colors[color_index % this.colors.length]
                    );
                    start_angle += slice_angle;
                    color_index++;
                }
                if (this.options.legend) {
                    color_index = 0;
                    var legendHTML = "";
                    for (categ in this.options.data) {
                        legendHTML += "<div><span class='legend-color' style='background-color:" + this.colors[color_index++] + ";'>&nbsp;</span> " + categ + "</div>";
                    }
                    this.options.legend.innerHTML = legendHTML;
                }
            };
        };
        var myVinyls = {
            "Réalisation / Test Unitaires": 41,
            "Gestion de projet": 22,
            "Intégration et Tests": 20,
            "Autre": 17
        };
        var myPiechart = new Piechart({
            canvas: myCanvas,
            data: myVinyls,
            colors: ["#007DAB", "#0099C9", "#84CEE5", "#CFD8DC"],
            legend: myLegend
        });
        myPiechart.draw();
    </script>
  </div>
  <div class="text-center mb-3"><img src=../../images/Estimancy_Logo_150px_RVB.png></div>
</div>




<%= hidden_field_tag :project_id, @project.id %>
<%= render 'dashboard_inner' %>