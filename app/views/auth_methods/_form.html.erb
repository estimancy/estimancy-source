<section class="card card-content-bloc estimancy-form">
  <div class="mb-5">
    <div class="effort-bloc">

        <div class="edition-bloc-title">
          <ul>
            <li><h4><a href="#tabs-1"><%= I18n.t(:auth_methods) %> </a></h4></li>
          </ul>
        </div>

        <div id="tabs-1">
          <div class="edition-bloc-content">
            <div class="edition-bloc-form">

            <%= simple_form_for(@auth_method) do |f| %>
              <%= f.error_notification %>

                <div class="form-row">
                  <div class="col-5">
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                      <%= f.input :name, :label => false, :input_html => {:class => 'mdl-textfield__input form-control', :autofocus => (controller.action_name == 'new')} %>
                      <label class="mdl-textfield__label" for="name"><%= I18n.t(:name) %></label>
                    </div>
                  </div>
                </div>

                <div class="form-row">
                  <div class="col-5">
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                      <%= f.input :server_name, :label => false, :input_html => {:class => 'mdl-textfield__input form-control'} %>
                      <label class="mdl-textfield__label" for="server_name"><%= I18n.t(:server_name) %></label>
                    </div>
                  </div>
                </div>

                <div class="form-row">
                  <div class="col-5">
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                      <%= f.input :port, :as => :select, :collection => ['389', '636'],
                                :label => false, :input_html => {:class => 'mdl-textfield__input form-control'} %>
                      <label class="mdl-textfield__label" for="port"><%= I18n.t(:port) %></label>
                    </div>
                  </div>

                  <div class="col-5">
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                      <%= f.input :encryption, :label => false,
                                  :collection => ['No encryption', 'SSL (ldaps://)', 'StartTLS' ],
                                  :input_html => {:class => 'mdl-textfield__input form-control'} %>
                      <label class="mdl-textfield__label" for="encryption"><%= I18n.t(:encryption) %></label>
                    </div>
                  </div>
                </div>

                <div class="form-row">
                  <div class="col-5">
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                      <%= f.input :ldap_bind_dn, :label => false, :input_html => {:class => 'mdl-textfield__input form-control', :type => "text"} %>
                      <label class="mdl-textfield__label" for="ldap_bind_dn"><%= I18n.t(:ldap_bind_dn) %></label>
                    </div>
                  </div>
                </div>

                <div class="form-row">
                  <div class="col-5">
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                      <%= f.input :password, :label => false, :input_html => {:class => 'mdl-textfield__input form-control', :disabled => false, :type => "text"} %>
                      <label class="mdl-textfield__label" for="password"><%= I18n.t(:ldap_bind_encrypted_password) %></label>
                    </div>
                  </div>
                </div>

                <div class="form-row">
                  <div class="col-5">
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                      <%= f.input :base_dn, :label => false, :input_html => {:class => 'mdl-textfield__input form-control'} %>
                      <label class="mdl-textfield__label" for="base_dn"><%= I18n.t(:base_dn) %></label>
                    </div>
                  </div>
                </div>

                <div class="form-row">
                  <div class="col-5">
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                        <%= f.input :priority_order, :label => false, :input_html => {:class => 'mdl-textfield__input form-control'} %>
                        <label class="mdl-textfield__label" for="priority_order"><%= I18n.t(:priority_order) %></label>
                    </div>
                  </div>

                  <div class="col-5">
                      <%= f.input :on_the_fly_user_creation, :label => I18n.t(:on_the_fly_user_creation),
                                  :input_html => {:class => 'mdl-textfield__input form-control'} %>
                  </div>
                </div>


                <div id="accordion1" class="accordion">
                  <div class="accordion-group accordion-caret">
                    <div class="accordion-heading">
                      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion1" href="#collapseOne">
                        <i class="fa fa-caret-down"></i>
                        <b><%= I18n.t('ldap_attributes') %></b>
                      </a>
                    </div>
                    <div id="collapseOne" class="accordion-body in collapse">
                      <div class="accordion-inner">

                            <div class="form-row">
                              <div class="col-5">
                                <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                                  <%= f.input :user_name_attribute, :label => false, :input_html => {:class => 'mdl-textfield__input form-control'} %>
                                  <label class="mdl-textfield__label" for="user_name_attribute"><%= I18n.t(:user_name_attribute) %></label>
                                </div>
                              </div>
                            </div>

                            <div class="form-row">
                              <div class="col-5">
                                <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                                    <%= f.input :first_name_attribute, :label => false, :input_html => {:class => 'mdl-textfield__input form-control'} %>
                                    <label class="mdl-textfield__label" for="first_name_attribute"><%= I18n.t(:first_name_attribute) %></label>
                                </div>
                              </div>

                              <div class="col-5">
                                <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                                  <%= f.input :last_name_attribute, :label => false, :input_html => {:class => 'mdl-textfield__input form-control'} %>
                                  <label class="mdl-textfield__label" for="last_name_attribute"><%= I18n.t(:last_name_attribute) %></label>
                                </div>
                              </div>
                            </div>

                            <div class="form-row">
                              <div class="col-5">
                                <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                                  <%= f.input :email_attribute, :label => false, :input_html => {:class => 'mdl-textfield__input form-control', :type => "text"} %>
                                  <label class="mdl-textfield__label" for="email_attribute"><%= I18n.t(:email_attribute) %></label>
                                </div>
                              </div>

                              <div class="col-5">
                                <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                                  <%= f.input :initials_attribute, :label => false, :input_html => {:class => 'mdl-textfield__input form-control'} %>
                                  <label class="mdl-textfield__label" for="initials_attribute"><%= I18n.t(:initials_attribute) %></label>
                                </div>
                              </div>
                            </div>


                      </div>
                    </div>
                  </div>
                </div>

                <br>

                <div class="form-row">
                  <div class="col-5">
                    <div class="actions-tabs">
                      <% if action_name.in?(%w(new create)) %>
                        <%= submit_tag I18n.t('save_and_create'), :class => 'btn btn-primary' %>
                        <%= submit_tag I18n.t('save'), :class => 'btn btn-primary' %>
                      <% elsif action_name == 'edit' || action_name=='update' %>
                        <%= submit_tag I18n.t('save'), :class => 'btn btn-primary' %>
                        <%= submit_tag I18n.t('apply'), :class => 'btn btn-primary' %>
                      <% end %>
                      <%= link_to I18n.t('back'), auth_methods_path, :class => 'btn btn-secondary' %>
                    </div>
                  <% end %>
                </div>
              </div>

            </div>

          </div>
        </div>

    </div>
  </div>
</section>
