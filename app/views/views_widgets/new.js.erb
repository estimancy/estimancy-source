
$("#notifications").html("");

<% if params[:is_label_widget] == "true" %>
  $(".modal-body-inner").html("<%= j render(:partial => "views_widgets/comment_form") %>");
  $("#myModalLabel").css('font-size', 'larger');
  $("#myModalLabel").html('<%= I18n.t(:new_widget_comment) %>');
<% elsif params[:is_kpi_widget] == "true" %>
  $(".modal-body-inner").html("<%= j render(:partial => "views_widgets/kpi_form") %>");
  $("#myModalLabel").css('font-size', 'larger');
  $("#myModalLabel").html('<%= I18n.t(:new_widget_kpi) %>');
<% else %>
  $(".modal-body-inner").html("<%= j render(:partial => "views_widgets/form") %>");
  $("#myModalLabel").css('font-size', 'larger');
  $("#myModalLabel").html('<%= I18n.t(:new_widget) %>');
<% end %>


$(".modal .modal-body").css("height", "auto");


$("#edit_component").modal({
  keyboard: false,
  backdrop: "static",
  backdrop: false
});


$("#views_widget_icon_class").change(function(){
    if ($(this).val() !== ""){
        $("#view_icon_class_image").removeClass();
        $("#view_icon_class_image").addClass( $(this).val());
        $("#view_icon_class_image").addClass( "icon-large blue" );
    }
    else{
        $("#view_icon_class_image").removeClass();
    }
    return false;
});

$("#views_widget_module_project_id").change(function() {
    if ($(this).val() !== ""){
        return $.ajax({
            url: "/update_widget_module_project_data",
            method: "GET",
            data: "module_project_id=" + $(this).val()
        });
    }
});

$("#notifications").html("<%= j(render "layouts/notifications") %>");

//$("#views_widget_color").colorpicker();

$("#views_widget_color").spectrum({
    showPaletteOnly: true,
    showPalette:true,
    hideAfterPaletteSelect:true,
    showInitial: true,
    preferredFormat: "hex",
    replacerClassName: 'mycolorpicker',
    //color: 'blanchedalmond',
    <% if @views_widget.new_record? %>
        color: 'blanchedalmond',
    <% end %>

    palette: [
        ['#E9ABBE', '#AA8AB8', "#FFD8BB", '#DAD5DC', '#E5D4DA'],
        ['#F3CFDA', '#E8B189', '#F4EBEE', '#D3CCC6', '#BDB1B5'],
        ['#D5DEBC', '#EAE4C6', '#839B94', '#E1F7A6', '#89CCB8'],
        ['#FFFFFF', '#B7D2FC', '#6CA5FF', '#B576AD', '#CEDEF6']
    ]
});
