<div class="tabs">
  <ul>
    <li>
      <a href="#tabs-1">
        <%= I18n.t(:Generic_Model_Effort)%>
      </a>
    </li>
    <li>
      <a href="#tabs-2">
        <%= I18n.t(:data) %>
      </a>
    </li>
  </ul>

  <div id="tabs-1">
    <%= simple_form_for(@ge_model) do |f| %>

      <div class="alert alert-info">
        <%= I18n.t(:simple_text_mess_1).html_safe %>
      </div>
      <%= f.error_notification %>

      <%#= f.input :organization_id, as: :hidden, input_html: { value: params[:organization_id] } %>
      <%= f.input :organization_id, as: :hidden, input_html: { value: @organization.id } %>

      <div class="form-inputs">
        <%= f.input :name %>
        <%= f.input :three_points_estimation, label: I18n.t(:three_points_estimation) %>
        <%= f.input :enabled_input, label: I18n.t(:modification_entry_valur) %>
        <%= f.input :coeff_a, label: "#{I18n.t(:label_Factor)} a" %>
        <%= f.input :coeff_b, label: "#{I18n.t(:scale_factor)} : b" %>
        <%= f.input :size_unit, label: I18n.t(:retained_size_unit_2) %>
        <%= f.input :effort_unit, label: I18n.t(:Wording_of_the_module_unit_effort_2) %>
        <%= f.input :standard_unit_coefficient, label: I18n.t(:standard_coef_conv) %>
      </div>

      <% if can? :manage_modules_instances, ModuleProject %>
         <%= f.button :submit, I18n.t('save') %>
      <% end %>
      <%= link_to I18n.t(:back), main_app.organization_module_estimation_path(@current_organization, anchor: "effort"), class: "btn" %>
    <% end %>
  </div>

  <div id="tabs-2">
    <div>
      <% unless controller.action_name == "new" %>

        <div class="row-fluid">
          <div class="span6">
            <%= form_tag ge.ge_model_import_path(@ge_model.id), :multipart => true, method: "post", :class => 'simple_form' do %>

              <div class="form-inputs">
                <label style="color: #808080"><%= I18n.t(:import_generic_effort_model) %> </label> <br>
                <%= file_field_tag :file %>
                <%= hidden_field_tag :ge_model_id, @ge_model.id %>

                <%= submit_tag I18n.t(:import), :class => 'btn btn-primary' %>
              </div>
              <hr>
            <% end %>
          </div>
          <div class="span6">
            <% unless @ge_model.ge_factors.empty? %>
              <label style="color: #808080"><%= I18n.t(:data_filename, filename: @ge_model.ge_factors.first.data_filename) %> </label> <br>
            <% end %>
            <%= link_to I18n.t(:export), ge.ge_model_data_export_path(@ge_model), :class => 'btn' %>
            <hr>
          </div>
        </div>
      <% end %>
    </div>

    <% unless @ge_model.ge_factors.empty? %>
      <div class="row-fluid">
        <div class="span8">
          <h3 style="color: #808080"><%= I18n.t(:factor_list) %> <i class="fa fa-info-circle" title="<%= I18n.t(:scale_prod_help) %>"></i></h3>
          <table class="table table-bordered table-condensed tablesorterPager">
            <thead>
            <tr>
              <th> Scale Prod </th>
              <th> Type </th>
              <th> Short Name Factor </th>
              <th>Long name Factor</th>
              <th>Description</th>
            </tr>
            </thead>

            <tbody>
            <% @ge_model.ge_factors.order('scale_prod asc').each do |ge_factor| %>
              <% case ge_factor.scale_prod.downcase %>
                <% when "p" %>
                  <% td_class = "product_factor" %>
                <% when "s" %>
                  <% td_class = "scale_factor" %>
                <% when "c" %>
                  <% td_class = "conversion_factor" %>
              <% end %>
                <tr>
                  <td class="<%= td_class %>"><%= ge_factor.scale_prod %></td>
                  <td><%= ge_factor.factor_type %></td>
                  <td><%= ge_factor.short_name %></td>
                  <td><%= ge_factor.long_name %></td>
                  <td><%= ge_factor.description %></td>
                </tr>
            <% end %>
            </tbody>

            <%#= render :partial => 'layouts/footer_table' %>
          </table>
        </div>

        <div class="span4">
          <h3 style="color: #808080"><%= I18n.t(:factor_values) %> <i class="fa fa-info-circle" title="<%= I18n.t(:scale_prod_help) %>"></i></h3>
          <% if @ge_model.ge_factor_values.nil? %>
            <h4><%= I18n.t(:there_is_no_factor_values) %></h4>

          <% else %>
            <table class="table table-bordered table-condensed tablesorterPager">
              <thead>
              <tr>
                <th>Scale Prod</th>
                <th><%= I18n.t(:factors) %></th>
                <th><%= I18n.t(:value_text) %></th>
                <th><%= I18n.t(:value_number) %></th>
                <th><%= I18n.t(:default_value) %></th>
              </tr>
              </thead>

              <tbody>
              <% @ge_model.ge_factor_values.each do |ge_factor_value| %>
                <% case ge_factor_value.factor_scale_prod.downcase %>
                  <% when "p" %>
                    <% tr_class = "product_factor" %>
                  <% when "s" %>
                    <% tr_class = "scale_factor" %>
                  <% when "c" %>
                    <% tr_class = "conversion_factor" %>
                <% end %>
                <tr>
                  <td class=<%= tr_class %> ><%= ge_factor_value.factor_scale_prod %></td>
                  <td class=<%= tr_class %> ><%= ge_factor_value.factor_name %></td>
                  <td><%= ge_factor_value.value_text %></td>
                  <td><%= ge_factor_value.value_number %></td>
                  <td><%#= ge_factor_value.default %> <%= check_box_tag("default_value[#{ge_factor_value.id}]", ge_factor_value.id, ge_factor_value.default, :disabled => true) %></td>
                </tr>
              <% end %>
              </tbody>

              <%= render :partial => 'layouts/footer_table' %>
            </table>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>

</div>