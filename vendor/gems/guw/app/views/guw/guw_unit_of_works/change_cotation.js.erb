<% unless @guw_model.one_level_model == true %>
  <% if @guw_unit_of_work.off_line == true %>
    $(".cotation_label_<%= @guw_unit_of_work.id %>").html("<%= j(link_to "HSat", guw.guw_unit_of_work_load_cotations_path(@guw_unit_of_work), class: "red_color", method: "post", remote: true) %>")
  <% elsif @guw_unit_of_work.off_line_uo == true %>
    $(".cotation_label_<%= @guw_unit_of_work.id %>").html("<%= j(link_to "HSuo", guw.guw_unit_of_work_load_cotations_path(@guw_unit_of_work), class: "red_color", method: "post", remote: true) %>")
  <% elsif @guw_unit_of_work.guw_complexity.nil? %>
    $(".cotation_label_<%= @guw_unit_of_work.id %>").html("<%= j(link_to "-----", guw.guw_unit_of_work_load_cotations_path(@guw_unit_of_work), method: "post", remote: true) %>")
  <% else %>
    $(".cotation_label_<%= @guw_unit_of_work.id %>").html("<%= j(link_to @guw_unit_of_work.guw_complexity.name, guw.guw_unit_of_work_load_cotations_path(@guw_unit_of_work), method: "post", remote: true) %>")
  <% end %>
  $(".effort_label<%= @guw_unit_of_work.id %>").html("<%= @guw_unit_of_work.effort.nil? ? '-' : @guw_unit_of_work.effort.round(3) %>")
<% else %>
  $(".cotation_label_<%= @guw_unit_of_work.id %>").html("<%= j(select_tag "guw_complexity_#{@guw_unit_of_work.id}", options_for_select(@guw_unit_of_work.guw_type.guw_complexities.map{|i| [i.name, i.id] }, selected: @guw_unit_of_work.guw_complexity_id), class: "input-small") %>")
  $(".effort_label<%= @guw_unit_of_work.id %>").html("<%= @guw_unit_of_work.effort.nil? ? '-' : @guw_unit_of_work.effort.round(3) %>")
<% end %>

<% results = Guw::GuwComplexityTechnology.where(guw_type_id: @guw_unit_of_work.guw_type_id).select{|ct| ct.coefficient != nil }.map{|i| i.organization_technology }.uniq %>

$(".technology_<%= @guw_unit_of_work.id %>").html("<%= j(select_tag "guw_technology[#{@guw_unit_of_work.id}]", options_for_select(results.map{|i| [i.name, i.id]},
                                                                selected: @guw_unit_of_work.organization_technology.nil? ? @guw_unit_of_work.guw_unit_of_work_group.organization_technology_id : @guw_unit_of_work.organization_technology_id),
               class: "guw_technology input-small",
               guw: @guw_unit_of_work.id,
               required: true,
               readonly: (!@guw_unit_of_work.guw_type.allow_complexity && !can?(:execute_estimation_plan, @project))) %>")

<% if @guw_unit_of_work.guw_type.allow_retained.nil? %>
  $(".ajusted_effort_<%= @guw_unit_of_work.id %>").html("<%= j(text_field_tag "ajusted_effort[#{@guw_unit_of_work.id}]", @guw_unit_of_work.ajusted_effort.nil? ? '' : @guw_unit_of_work.ajusted_effort.round(3), class: "input-mini retained-#{@guw_unit_of_work.guw_unit_of_work_group.id}", readonly: !can?(:execute_estimation_plan, @project)) %>")
<% else %>
  <% if @guw_unit_of_work.guw_type.allow_retained == false %>
    $(".ajusted_effort_<%= @guw_unit_of_work.id %>").html("-")
  <% else %>
    $(".ajusted_effort_<%= @guw_unit_of_work.id %>").html("<%= j(text_field_tag "ajusted_effort[#{@guw_unit_of_work.id}]", @guw_unit_of_work.ajusted_effort.nil? ? '' : @guw_unit_of_work.ajusted_effort.round(3), class: "input-mini retained-#{@guw_unit_of_work.guw_unit_of_work_group.id}", readonly: !can?(:execute_estimation_plan, @project)) %>")
  <% end %>
<% end %>
