<% @unit_of_work_groups = Guw::GuwUnitOfWorkGroup.where(organization_id: @organization.id,
                                                        project_id: @project.id,
                                                        module_project_id: @module_project.id,
                                                        pbs_project_element_id: @component.id)
%>

<% @guw_types = @guw_model.guw_types %>

<% @hash_guw_outputs = {} %>
<% Guw::GuwOutput.where(guw_model_id: @guw_model.id,
                        name: @guw_model.orders.map(&:first)).each do |guw_output| %>
<% @hash_guw_outputs[guw_output.name] = guw_output %>
<% end %>

<% @hash_guw_coefficients = {} %>
<% Guw::GuwCoefficient.where(guw_model_id: @guw_model.id,
                             name: @guw_model.orders.map(&:first)).each do |guw_coef| %>
<% @hash_guw_coefficients[guw_coef.name] = guw_coef %>
<% end %>

<% @guow_guw_coefficient_element_unit_of_works = Hash.new {|h,k| h[k] = [] } %>
<% Guw::GuwCoefficientElementUnitOfWork.where(module_project_id: current_module_project.id).each do |gceuw| %>
<% @guow_guw_coefficient_element_unit_of_works[gceuw.guw_unit_of_work_id] << gceuw %>
<% end %>

$("#guw_block").html("<%= j(render(partial: "guw/guw_unit_of_works/settings_new")) %>");

var my_array = [];
$(document).ready(function(){
  $("table#guw input").keyup(function(e) {
    var new_line = $(this).closest("tr").data("guw-id");
    my_array.push(new_line);
    $("#modified_guw_line_ids").val(my_array);
  });

  $("table#guw select").on("change", function(e) {
    var new_line = $(this).closest("tr").data("guw-id");
    my_array.push(new_line);
    $("#modified_guw_line_ids").val(my_array);
  });
});
